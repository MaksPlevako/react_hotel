{"ast":null,"code":"import React,{useState,useEffect}from'react';import Price from'./price';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function HotelRoomPicker(props){const[bestRoom,setBestRoom]=useState();const[roomData,setRoomData]=useState([]);useEffect(()=>{fetch('http://localhost:8080/nomers').then(res=>res.json()).then(data=>{setRoomData(data);}).catch(err=>console.error(err));},[]);useEffect(()=>{if(roomData.length>0){const currentGuest=props.guest===0?1:props.guest;const bestRoom=geneticAlgorithm(roomData,50,5,currentGuest);setBestRoom(bestRoom);}},[roomData,props.guest]);const calculateFitness=room=>{return room['number of seats'];};const geneticAlgorithm=(roomData,populationSize,generations,guest)=>{let bestRoom=null;const bestFitness=guest==3?4:guest;for(let gen=0;gen<generations;gen++){for(let i=0;i<populationSize;i++){const randomRoom=roomData[Math.floor(Math.random()*roomData.length)];const fitness=calculateFitness(randomRoom);if(bestFitness<=fitness){bestRoom=randomRoom;if(props.onRoomSelect){props.onRoomSelect(bestRoom.id);}}}}return bestRoom;};const changeRoom=()=>{const currentGuest=props.guest===0?1:props.guest;const newRoom=geneticAlgorithm(roomData,50,5,currentGuest);setBestRoom(newRoom);if(props.onRoomSelect){props.onRoomSelect(newRoom.id);}};return/*#__PURE__*/_jsx(\"div\",{children:bestRoom&&/*#__PURE__*/_jsxs(\"div\",{className:\"nomers_change_nomer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"change_nomers\",children:[/*#__PURE__*/_jsx(\"p\",{children:bestRoom['nomers name']}),/*#__PURE__*/_jsx(\"img\",{src:'/img/'+bestRoom['file photo'],alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Price,{departureDate:props.departureDate,arrivalDate:props.arrivalDate,guest:props.guest,price:bestRoom.price})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041A\\u0456\\u043B\\u044C\\u043A\\u0456\\u0441\\u0442\\u044C \\u043C\\u0456\\u0441\\u0446\\u044C: \",bestRoom['number of seats'],\" \\u041D\\u043E\\u043C\\u0435\\u0440 \\u043A\\u0456\\u043C\\u043D\\u0430\\u0442\\u0438:\",' ',bestRoom.id]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"change_nomer_button\",onClick:changeRoom,children:\"\\u0417\\u043C\\u0456\\u043D\\u0438\\u0442\\u0438 \\u043D\\u043E\\u043C\\u0435\\u0440\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","Price","jsx","_jsx","jsxs","_jsxs","HotelRoomPicker","props","bestRoom","setBestRoom","roomData","setRoomData","fetch","then","res","json","data","catch","err","console","error","length","currentGuest","guest","geneticAlgorithm","calculateFitness","room","populationSize","generations","bestFitness","gen","i","randomRoom","Math","floor","random","fitness","onRoomSelect","id","changeRoom","newRoom","children","className","src","alt","departureDate","arrivalDate","price","type","onClick"],"sources":["D:/project/frontend/src/components/alg.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Price from './price'\r\n\r\nexport default function HotelRoomPicker(props) {\r\n\tconst [bestRoom, setBestRoom] = useState()\r\n\tconst [roomData, setRoomData] = useState([])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch('http://localhost:8080/nomers')\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetRoomData(data)\r\n\t\t\t})\r\n\t\t\t.catch(err => console.error(err))\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (roomData.length > 0) {\r\n\t\t\tconst currentGuest = props.guest === 0 ? 1 : props.guest\r\n\t\t\tconst bestRoom = geneticAlgorithm(roomData, 50, 5, currentGuest)\r\n\t\t\tsetBestRoom(bestRoom)\r\n\t\t}\r\n\t}, [roomData, props.guest])\r\n\r\n\tconst calculateFitness = room => {\r\n\t\treturn room['number of seats']\r\n\t}\r\n\r\n\tconst geneticAlgorithm = (roomData, populationSize, generations, guest) => {\r\n\t\tlet bestRoom = null\r\n\t\tconst bestFitness = guest == 3 ? 4 : guest\r\n\t\tfor (let gen = 0; gen < generations; gen++) {\r\n\t\t\tfor (let i = 0; i < populationSize; i++) {\r\n\t\t\t\tconst randomRoom = roomData[Math.floor(Math.random() * roomData.length)]\r\n\t\t\t\tconst fitness = calculateFitness(randomRoom)\r\n\t\t\t\tif (bestFitness <= fitness) {\r\n\t\t\t\t\tbestRoom = randomRoom\r\n\t\t\t\t\tif (props.onRoomSelect) {\r\n\t\t\t\t\t\tprops.onRoomSelect(bestRoom.id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn bestRoom\r\n\t}\r\n\r\n\tconst changeRoom = () => {\r\n\t\tconst currentGuest = props.guest === 0 ? 1 : props.guest\r\n\t\tconst newRoom = geneticAlgorithm(roomData, 50, 5, currentGuest)\r\n\t\tsetBestRoom(newRoom)\r\n\t\tif (props.onRoomSelect) {\r\n\t\t\tprops.onRoomSelect(newRoom.id)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{bestRoom && (\r\n\t\t\t\t<div className='nomers_change_nomer'>\r\n\t\t\t\t\t<div className='change_nomers'>\r\n\t\t\t\t\t\t<p>{bestRoom['nomers name']}</p>\r\n\t\t\t\t\t\t<img src={'/img/' + bestRoom['file photo']} alt='' />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Price\r\n\t\t\t\t\t\t\t\tdepartureDate={props.departureDate}\r\n\t\t\t\t\t\t\t\tarrivalDate={props.arrivalDate}\r\n\t\t\t\t\t\t\t\tguest={props.guest}\r\n\t\t\t\t\t\t\t\tprice={bestRoom.price}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tКількість місць: {bestRoom['number of seats']} Номер кімнати:{' '}\r\n\t\t\t\t\t\t\t{bestRoom.id}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\tclassName='change_nomer_button'\r\n\t\t\t\t\t\tonClick={changeRoom}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tЗмінити номер\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}